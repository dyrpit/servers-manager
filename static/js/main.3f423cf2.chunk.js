(window["webpackJsonpservers-manager"]=window["webpackJsonpservers-manager"]||[]).push([[0],{18:function(e,t,a){e.exports=a(51)},23:function(e,t,a){},24:function(e,t,a){},44:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),s=a.n(c),l=(a(23),a(24),function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"logo__sign"}),r.a.createElement("div",{className:"logo__title"},"Servers Manager")))}),o=a(3),u=a.n(o),i=a(5),m=a(4),p=a(16),f=a.n(p).a.create({baseURL:"https://dyrpit-servers-api.herokuapp.com",headers:{"Content-Type":"application/json"}}),v={getAllServers:function(){return f.get("/servers")},getServer:function(e){return f.get("/servers/".concat(e))},turnServerOn:function(e){return f.patch("/servers/".concat(e,"/on"))},turnServerOff:function(e){return f.patch("/servers/".concat(e,"/off"))},rebootServer:function(e){return f.patch("/servers/".concat(e,"/reboot"))}},d="GET_SERVERS_PENDING",E="GET_SERVERS_SUCCESS",_="GET_SERVERS_ERROR",b="GET_SERVER",h="TURN_OFF_SERVER",O="TURN_ON_SERVER",N="REBOOT_SERVER",g=function(e){return{type:_,payload:e}},S=function(e){return{type:h,payload:e}},R=function(e){return{type:O,payload:e}},y=function(e){return{type:N,payload:e}},j=function(e){return{type:b,payload:e}},w=a(1),T=function(e,t){switch(t.type){case d:return Object(w.a)(Object(w.a)({},e),{},{pending:!0});case E:return Object(w.a)(Object(w.a)({},e),{},{pending:!1,servers:t.payload});case _:return Object(w.a)(Object(w.a)({},e),{},{pending:!1,error:t.payload});case b:case h:case O:case N:return Object(w.a)(Object(w.a)({},e),{},{servers:e.servers.map((function(e){return e.id===t.payload.id?t.payload:e}))});default:return e}},k=Object(n.createContext)(),x={servers:[],pending:!1,error:null},C=function(e){var t=e.children,a=Object(n.useReducer)(T,x),c=Object(m.a)(a,2),s=c[0],l=c[1];return r.a.createElement(k.Provider,{value:{state:s,dispatch:l}},t)},I=(a(44),function(e){var t=e.children;return r.a.createElement("main",{className:"container"},t)}),V=a(17),G=a.n(V),L=(a(47),function(e){var t=e.serversCount;return r.a.createElement("div",{className:"servers-count"},r.a.createElement("p",{className:"servers-count__title"},"Servers"),r.a.createElement("p",{className:"servers-count__text"},"Number of elements: ",t))}),F=L;L.propTyeps={serversCount:G.a.number};a(48);var B=function(e){var t=e.searchValue,a=e.setSearchValue,n=t?r.a.createElement("button",{onClick:function(){a("")},className:"search__button"},r.a.createElement("i",{className:"fas fa-times"})):r.a.createElement("button",{className:"search__button"},r.a.createElement("i",{className:"fas fa-search"}));return r.a.createElement("div",{className:"search"},r.a.createElement("div",{className:"search-field"},r.a.createElement("input",{className:"search__input",placeholder:"Search",value:t,onChange:function(e){var t=e.target.value;a(t.toLowerCase())}}),n))},U=(a(49),function(){return r.a.createElement("div",{className:"table__header"},r.a.createElement("p",{className:"table__header__name"},"name"),r.a.createElement("p",{className:"table__header__status"},"status"))}),P=function(e){var t=e.status,a={ONLINE:r.a.createElement("div",{className:"table__row__status table__row__status online"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-circle icon-online"}),t)),OFFLINE:r.a.createElement("div",{className:"table__row__status"},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-times offline icon-offline"}),t)),REBOOTING:r.a.createElement("div",{className:"table__row__status reboot"},r.a.createElement("p",null,t,"..."))};return t?r.a.createElement(r.a.Fragment,null,a[t]):null},A=(a(50),function(e){var t=e.isOpen,a=e.handleToggleTooltip,n=e.status,c=e.handleTurnOn,s=e.handleTurnOff,l=e.handleReboot,o=t?"tooltip__controls--open":"",u="REBOOTING"===n?"tooltip--disabled":"",i="ONLINE"===n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tooltip__controls__button",onClick:s},"Turn off"),r.a.createElement("div",{className:"tooltip__controls__button",onClick:l},"Reboot")):r.a.createElement("div",{className:"tooltip__controls__button",onClick:c},"Turn on");return r.a.createElement("div",{className:"tooltip ".concat(u),onClick:function(e){"REBOOTING"!==n&&a(e)}},r.a.createElement("div",{className:"tooltip__dot"}),r.a.createElement("div",{className:"tooltip__dot"}),r.a.createElement("div",{className:"tooltip__dot"}),r.a.createElement("div",{className:"tooltip__controls ".concat(o)},i))}),J=function(e){var t=e.server,a=Object(n.useState)(!1),c=Object(m.a)(a,2),s=c[0],l=c[1],o=Object(n.useContext)(k).dispatch,p=function(e){e.stopPropagation(),l((function(e){return!e}))},f=function(){var e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.turnServerOn(t.id);case 3:a=e.sent,o(R(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(g(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(i.a)(u.a.mark((function e(){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.turnServerOff(t.id);case 3:a=e.sent,o(S(a.data)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(g(e.t0.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.a)(u.a.mark((function e(){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.rebootServer(t.id);case 3:n=e.sent,o(y(n.data)),"REBOOTING"===n.data.status&&(a=setInterval(Object(i.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getServer(t.id);case 2:"ONLINE"===(n=e.sent).data.status&&(o(j(n.data)),clearInterval(a));case 4:case"end":return e.stop()}}),e)}))),1e3)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),o(g(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("li",{className:"table__row",onClick:function(e){return s&&p(e)}},r.a.createElement("p",{className:"table__row__name"},t.name),r.a.createElement(P,{status:t.status}),r.a.createElement(A,{isOpen:s,handleToggleTooltip:p,status:t.status,handleTurnOn:f,handleTurnOff:d,handleReboot:E}))},D=function(e){var t=e.servers;return r.a.createElement("div",{className:"table"},r.a.createElement(U,null),r.a.createElement("ul",{className:"table__list"},t.map((function(e){return r.a.createElement(J,{key:e.id,server:e})}))))},M=function(){var e=Object(n.useContext)(k),t=e.state,a=e.dispatch,c=Object(n.useState)(""),s=Object(m.a)(c,2),l=s[0],o=s[1],p=Object(n.useState)(t.servers),f=Object(m.a)(p,2),_=f[0],b=f[1];return Object(n.useEffect)((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:d}),e.prev=1,e.next=4,v.getAllServers();case 4:t=e.sent,a((n=t.data,{type:E,payload:n})),b(t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),a(g(e.t0.message));case 12:case"end":return e.stop()}var n}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}})()()}),[a]),Object(n.useEffect)((function(){var e=t.servers.filter((function(e){return["online","offline","rebooting"].includes(l)?e.status.toLowerCase().includes(l):e.name.toLowerCase().includes(l)}));b(e)}),[l,t.servers]),r.a.createElement(I,null,t.pending?r.a.createElement("p",{style:{margin:"0 auto"}},"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{serversCount:_.length}),r.a.createElement(B,{searchValue:l,setSearchValue:o}),r.a.createElement(D,{servers:_})))},q=function(){return r.a.createElement(C,null,r.a.createElement(l,null),r.a.createElement(M,null))};s.a.render(r.a.createElement(q,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3f423cf2.chunk.js.map